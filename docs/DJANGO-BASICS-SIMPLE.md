# توضیح سادهٔ کارهای انجام‌شده در پروژه Django

این سند برای کسی است که تازه با Django آشنا شده و می‌خواهد بداند هر کار **چی هست**، **چرا** انجام شده، **کدوم‌ها لازم نیست**، و **سرور توسعه** و **پنل ادمین** چی هستند.

---

## ۱. سرور توسعه (Development Server) چیه؟

- **چی هست:** یک وب‌سرور سبک که با دستور `python manage.py runserver` بالا می‌آید و درخواست‌های مرورگر را به کد Django می‌دهد و جواب برمی‌گرداند.
- **چرا استفاده می‌کنیم:** برای تست و توسعه روی خودِ کامپیوتر؛ بدون نیاز به نصب Apache یا Nginx.
- **آیا همیشه لازمه؟** برای **توسعه** بله؛ برای **روی سرور واقعی (Production)** نه — آنجا معمولاً از Gunicorn + Nginx یا مشابه استفاده می‌شود.
- **خلاصه:** سرور توسعه = همان برنامه‌ای که با `runserver` اجرا می‌کنی؛ فقط برای کار روزمرهٔ برنامه‌نویسی است، نه برای سرو دادن به کاربران واقعی در اینترنت.

---

## ۲. پنل ادمین (Admin Panel) برای چیه؟

- **چی هست:** یک صفحهٔ وب که Django به‌صورت رایگان می‌سازه؛ با لاگین می‌توانی داده‌های دیتابیس (کاربران، رزروها، و غیره) را **مشاهده، اضافه، ویرایش و حذف** کنی.
- **چرا استفاده می‌کنیم:** برای مدیریت محتوا و داده بدون نوشتن کد؛ مثلاً دیدن لیست رزروها، تأیید کاربران، یا اصلاح یک رکورد اشتباه.
- **آیا همهٔ پروژه‌ها باید داشته باشند؟** **نه.** اگر فقط API می‌سازی و مدیریت را با یک فرانت جدا (مثلاً Angular) انجام می‌دهی، می‌توانی اصلاً ادمین را استفاده نکنی یا فقط برای یک سری مدل‌ها فعالش کنی. خیلی از پروژه‌های فقط-API اصلاً از ادمین استفاده نمی‌کنند.
- **خلاصه:** پنل ادمین = داشبورد داخلی Django برای کار با دیتابیس؛ مفیده ولی اجباری نیست.

---

## ۳. کارهای انجام‌شده — خیلی ساده با دلیل

### ۳.۱ محیط مجازی (venv)

| موضوع | توضیح ساده |
|--------|-------------|
| **چی کردیم** | یک پوشهٔ `venv` ساختیم و همهٔ پکیج‌ها (مثل Django) را داخل آن نصب کردیم. |
| **چرا** | تا نسخهٔ Django این پروژه با پروژهٔ بعدی یا با Python سیستم قاطی نشود. |
| **می‌شه نداد؟** | تکنیکاً می‌شود مستقیم نصب کرد، ولی برای هر پروژه حرفه‌ای **توصیه می‌شود** حتماً venv داشته باشی. |

---

### ۳.۲ نصب Django و پکیج‌ها

| پکیج | کار ساده‌اش |
|------|-------------|
| **Django** | خود فریمورک؛ بدون آن اصلاً پروژهٔ Django نداریم. |
| **djangorestframework** | برای ساختن API (مثلاً `POST /api/bookings/`) به‌جای صفحهٔ HTML. |
| **djangorestframework-simplejwt** | برای لاگین با توکن (JWT) تا Angular بتواند با توکن درخواست بزند. |
| **django-cors-headers** | اجازه می‌دهد درخواست از یک دامنهٔ دیگر (مثلاً `localhost:4200` یعنی Angular) به سرور Django برسد؛ بدون آن مرورگر درخواست را بلاک می‌کند. |

**می‌شه بعضی را نداد؟**
- **Django و DRF:** برای این پروژه لازم‌اند.
- **SimpleJWT:** اگر فعلاً لاگین با توکن نمی‌خواهی، می‌توانی موقتاً نصب نکنی و بعداً اضافه کنی.
- **CORS:** اگر فرانت (Angular) روی دامنه/پورت دیگری است **حتماً** لازم است؛ وگرنه درخواست‌ها از سمت مرورگر بلاک می‌شوند.

---

### ۳.۳ ساخت پروژه با `startproject config .`

| موضوع | توضیح ساده |
|--------|-------------|
| **چی کردیم** | با یک دستور، پوشهٔ `config` و فایل `manage.py` و تنظیمات اولیه ساخته شد. |
| **چرا** | این ساختار پایهٔ هر پروژهٔ Django است؛ بدون آن چیزی برای اجرا نداری. |
| **می‌شه نداد؟** | نه؛ هر پروژهٔ Django باید یک بار با `startproject` (یا مشابه) ساخته شود. می‌توانی اسم را عوض کنی (مثلاً `myproject` به‌جای `config`). |

---

### ۳.۴ ساخت اپ‌ها (accounts و bookings)

| موضوع | توضیح ساده |
|--------|-------------|
| **چی کردیم** | دو «اپ» جدا ساختیم: یکی برای کاربر/لاگین، یکی برای رزرو. |
| **چرا** | Django پروژه را به قسمت‌های منطقی (اپ) تقسیم می‌کند تا کد شلوغ نشود و هر بخش مسئولیت خودش را داشته باشد. |
| **می‌شه نداد؟** | اپ‌ها را می‌شود جور دیگری هم سازمان داد (مثلاً یک اپ به‌نام `api`). ولی داشتن حداقل یک اپ برای مدل‌ها و ویوها معمول است. پروژهٔ خیلی خیلی کوچک می‌تواند فقط یک اپ داشته باشد. |

---

### ۳.۵ تنظیمات در `settings.py`

| تنظیم | کار ساده‌اش |
|--------|-------------|
| **INSTALLED_APPS** | به Django می‌گوید کدام اپ‌ها و پکیج‌ها «فعال» هستند؛ اگر اپ را اینجا ننویسی، Django آن را نمی‌شناسد. |
| **MIDDLEWARE (مثلاً CORS)** | یک لایه روی هر درخواست است؛ CORS در اول لیست یعنی قبل از هر چیز بررسی می‌شود که آیا این درخواست از دامنهٔ مجاز (مثلاً Angular) آمده یا نه. |
| **CORS_ALLOWED_ORIGINS** | دقیقاً همان دامنه‌هایی که اجازه دارند از مرورگر به API درخواست بزنند (مثلاً `http://localhost:4200`). |
| **REST_FRAMEWORK و JWT** | به DRF می‌گوید: پیش‌فرضاً برای API از احراز هویت JWT استفاده کن و فقط کاربر لاگین‌شده دسترسی داشته باشد (بعداً می‌توان برای بعضی endpointها استثنا گذاشت). |

**می‌شه بعضی را نداد؟**
- **اپ‌ها در INSTALLED_APPS:** اگر اپ را ننویسی، نمی‌توانی از مدل و ویوی آن استفاده کنی؛ پس برای اپ‌هایی که استفاده می‌کنی **باید** باشد.
- **CORS:** اگر فقط از همان دامنه (مثلاً فقط از خود Django قالب می‌زنی) می‌توانی نگذاریش؛ برای فرانت جدا (Angular) **معمولاً لازم است**.
- **JWT / REST_FRAMEWORK:** اگر فعلاً اصلاً لاگین نمی‌خواهی، می‌توانی موقتاً ساده‌تر بگذاری (مثلاً بدون احراز هویت پیش‌فرض) و بعداً اضافه کنی.

---

### ۳.۶ migrate و دیتابیس

| موضوع | توضیح ساده |
|--------|-------------|
| **چی کردیم** | دستور `migrate` را زدیم تا Django جدول‌هایش (کاربر، session، دسترسیها، و غیره) را در دیتابیس بسازد. |
| **چرا** | بدون این جداول، لاگین و ادمین و ذخیرهٔ داده کار نمی‌کند. |
| **می‌شه نداد؟** | نه؛ هر پروژهٔ Django که از دیتابیس استفاده می‌کند باید حداقل یک بار `migrate` را اجرا کند. دیتابیس پیش‌فرض SQLite است (یک فایل `db.sqlite3`) و برای توسعه کافی است. |

---

### ۳.۷ runserver و createsuperuser

| موضوع | توضیح ساده |
|--------|-------------|
| **runserver** | همان **سرور توسعه**؛ برنامهٔ Django را روی یک آدرس (مثلاً `http://127.0.0.1:8000`) اجرا می‌کند تا بتوانی تست کنی. |
| **createsuperuser** | یک کاربر «ادمین» می‌سازد که با آن می‌توانی وارد **پنل ادمین** شوی و (بعد از ثبت مدل‌ها در ادمین) داده‌ها را ببینی و ویرایش کنی. |

**می‌شه نداد؟**
- **runserver:** برای توسعه لازم است؛ برای محیط واقعی (Production) به‌جای آن از سرور دیگری (مثل Gunicorn) استفاده می‌شود.
- **createsuperuser:** فقط اگر بخواهی از پنل ادمین استفاده کنی لازم است؛ اگر اصلاً از ادمین استفاده نمی‌کنی، می‌توانی نزنی.

---

## ۴. آیا همهٔ پروژه‌های Django باید این موارد را داشته باشند؟

| مورد | جواب کوتاه |
|------|-------------|
| **سرور توسعه (runserver)** | برای **توسعه** بله؛ برای **Production** نه — آنجا سرور دیگری استفاده می‌شود. |
| **پنل ادمین** | **نه.** خیلی از پروژه‌ها فقط API می‌سازند و ادمین را اصلاً استفاده نمی‌کنند یا فقط برای بخشی از مدل‌ها فعال می‌کنند. |
| **venv** | **توصیهٔ قوی** بله؛ برای جداسازی وابستگی‌ها. |
| **DRF و CORS** | فقط وقتی پروژه **API** داره و فرانت **جدا** است (مثل Angular) لازم می‌شود. |
| **JWT** | فقط وقتی می‌خواهی با **توکن** لاگین کنی لازم است. |
| **migrate** | **بله**؛ هر پروژه‌ای که از دیتابیس استفاده می‌کند باید migrate داشته باشد. |
| **چند اپ (مثل accounts و bookings)** | **نه اجباری**؛ می‌توانی یک اپ داشته باشی؛ چند اپ فقط برای نظم و تقسیم مسئولیت است. |

---

## ۵. جمع‌بندی خیلی کوتاه

- **سرور توسعه** = برنامه‌ای که با `runserver` اجرا می‌کنی؛ مخصوص تست روی سیستم خودت است.
- **پنل ادمین** = داشبورد داخلی Django برای مدیریت داده؛ مفید است ولی برای همهٔ پروژه‌ها اجباری نیست.
- **کارهایی که تقریباً همیشه لازم‌اند:** ساخت پروژه، migrate، و (برای این پروژه) نصب Django و DRF و تنظیم اپ‌ها.
- **کارهایی که بسته به نوع پروژه می‌شود کم یا زیاد کرد:** CORS (فقط با فرانت جدا)، JWT (فقط با لاگین توکنی)، پنل ادمین و createsuperuser (فقط اگر از ادمین استفاده می‌کنی)، و تعداد اپ‌ها (می‌توانی یکی داشته باشی).

اگر روی یکی از این موارد (مثلاً فقط CORS یا فقط ادمین) سؤال داری، بپرس تا همان را ساده‌تر باز کنم.
